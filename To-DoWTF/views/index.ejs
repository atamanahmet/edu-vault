<%- include("partials/header.ejs") %>
<div class="container" style="display: flex; flex-flow: column nowrap; justify-content: center; align-items: center;">
  <h1>To-Don't List</h1>
  <fieldset
    style="display: flex; flex-flow: column nowrap; justify-content: center; align-items: center; width: 400px;"
  >
    <%if(locals.data){%>
   
      <% data.forEach((item)=>{%>
        <form action="/update" method="post">
      <div style="display: flex; flex-flow: row nowrap; gap:1rem; height: 40px; align-items: center;" id="div<%=item.id%>">
      <input type="checkbox" onclick="">
      <p style="margin-left:0rem;"><%=item.todoitem%></p>
      <img src="/img/quill-drawing-a-line.png" class="<%=item.id%>" alt="" width="20" height="20" onclick="edit(this)">
      </div>
      <div style="display: none; flex-flow: row nowrap; gap:1rem; height: 40px; align-items: center;" id="edit<%=item.id%>">
        <input type="text" style="padding: 0.2rem .4rem 0.2rem .4rem; margin-left: -.2rem; display: inherit;" name="<%=item.id %>" value="<%=item.todoitem%>">
        <button type="submit">Save</button>
      </div>
    </form>
      <% }) %>
      
  

    <form action="/new" method="post" "style="display: flex; flex-flow: row nowrap; gap:1rem; height: 40px; align-items: center;">
      <img src="/img/quill-drawing-a-line.png" style="font-size: 1em;" id="add" alt="" width="20" height="20" onclick="newItem(this)"/>

      <div id="newEntry" style="display: none;">
      <input type="text" name="newEntry" id="newEntry" style="padding: 0.2rem .4rem 0.2rem .4rem; margin-right:1rem;margin-left: -.2rem;" />
      <button type="submit" id="send" style="margin-left:2rem;">Save</button>

    </div>
    </form>

    <%}else{%>
    <form action="/userSelect" method="post">
      <%users.forEach((item) => {%>
      <button type="submit" name="id" value="<%=item.id%>">
        <%=item.name %>
      </button>
      <% }) %>
    </form>
    <% }%>
  </fieldset>
</div>
<script>
  function edit(element) {
  const id = element.className;
  
  document.getElementById("div"+id).style.display= "none";
  document.getElementById("edit"+id).style.display= "flex";

  }

 function removeEntry(v){
   
 }
 function newItem(element){
  element.style.display="none"
  document.getElementById("newEntry").style.display ="flex"
 }


</script>

<%- include("partials/footer.ejs") %>

